@using Questionnaire.Blazor.Models
@using Questionnaire.Blazor.Models.Questions
@using Questionnaire.Blazor.Pages.ReusableComponents.Questions

<div class="form-group row">

    @if (componentType != null)
    {
        <CascadingValue Value="QuestionAnswer">
            <DynamicComponent Type="componentType" />
        </CascadingValue>
    }
    else
    {
        <p>Не удалось отобразить вопрос</p>
    }
</div>

@code {
    private Type componentType;

    [Parameter]
    public QuestionAnswerModel QuestionAnswer { get; set; }

    protected override void OnInitialized()
    {
        componentType = typeof(QuestionComponentDisplay).Assembly
            .GetTypes()
            .FirstOrDefault(type => type.Name == QuestionAnswer.Question.QuestionType.ToString() + "QuestionComponent");
    }
}
